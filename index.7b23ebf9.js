const e=new class{constructor(e=null){this.board=e||this.createEmptyBoard(),this.score=0,this.status="playing"}createEmptyBoard(){let e=[];for(let t=0;t<4;t++)e.push([0,0,0,0]);return e}getState(){return this.board}getScore(){return this.score}getStatus(){for(let e of this.board)for(let t of e)if(2048===t)return this.status="win","win";return this.hasAvailableMoves()?"playing":(this.status="lose","lose")}hasEmptyCells(){for(let e of this.board)for(let t of e)if(0===t)return!0;return!1}canMerge(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(e<3&&this.board[e][t]===this.board[e+1][t]||t<3&&this.board[e][t]===this.board[e][t+1])return!0;return!1}hasAvailableMoves(){return this.hasEmptyCells()||this.canMerge()}moveLeft(){let e=!1;for(let t=0;t<4;t++){let s=this.board[t],r=this.mergeRow(s);r.some((e,t)=>e!==s[t])&&(e=!0),this.board[t]=r}e&&this.addRandomTile(),this.updateUI()}moveRight(){let e=!1;for(let t=0;t<4;t++){let s=[...this.board[t]].reverse(),r=this.mergeRow(s);r.some((e,t)=>e!==s[t])&&(e=!0),this.board[t]=r.reverse()}e&&this.addRandomTile(),this.updateUI()}moveUp(){let e=!1;for(let t=0;t<4;t++){let s=this.board.map(e=>e[t]),r=this.mergeRow(s);for(let e=0;e<4;e++)this.board[e][t]=r[e];r.some((e,t)=>e!==s[t])&&(e=!0)}e&&this.addRandomTile(),this.updateUI()}moveDown(){let e=!1;for(let t=0;t<4;t++){let s=this.board.map(e=>e[t]).reverse(),r=this.mergeRow(s);for(let e=0;e<4;e++)this.board[e][t]=r[3-e];r.some((e,t)=>e!==s[t])&&(e=!0)}e&&this.addRandomTile(),this.updateUI()}mergeRow(e){let t=e.filter(e=>0!==e);for(let e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,this.score+=t[e],t.splice(e+1,1));for(;t.length<4;)t.push(0);return t}start(){this.board=this.createEmptyBoard(),this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateUI()}restart(){this.start()}addRandomTile(){let e=[];for(let t=0;t<4;t++)for(let s=0;s<4;s++)0===this.board[t][s]&&e.push([t,s]);if(0===e.length)return;let t=e[Math.floor(Math.random()*e.length)],s=.1>Math.random()?4:2;this.board[t[0]][t[1]]=s;let[r,o]=e[Math.floor(Math.random()*e.length)],l=document.querySelector(`.game-field tr:nth-child(${r+1}) td:nth-child(${o+1})`);l.classList.add("appear"),setTimeout(()=>l.classList.remove("appear"),300)}updateUI(){let e=this.getStatus(),t=document.querySelector(".message-start"),s=document.querySelector(".message-win"),r=document.querySelector(".message-lose");t.classList.add("hidden"),"win"===e?(s.classList.remove("hidden"),r.classList.add("hidden")):"lose"===e?(r.classList.remove("hidden"),s.classList.add("hidden")):(s.classList.add("hidden"),r.classList.add("hidden")),document.querySelector(".game-score").textContent=this.score;let o=document.querySelectorAll(".field-cell"),l=0;for(let e=0;e<4;e++)for(let t=0;t<4;t++){let s=this.board[e][t],r=o[l];r.classList.remove("field-cell--2","field-cell--4","field-cell--8","field-cell--16","field-cell--32","field-cell--64","field-cell--128","field-cell--256","field-cell--512","field-cell--1024","field-cell--2048"),0!==s?(r.classList.add(`field-cell--${s}`),r.textContent=s):r.textContent="",l++}}updateScoreDisplay(){let e=document.querySelector(".score");e.textContent=this.score,e.classList.add("updated"),setTimeout(()=>e.classList.remove("updated"),300)}checkGameStatus(){let e=this.getStatus(),t=document.querySelector(".game-status");"win"===e?t.textContent="You Win!":"lose"===e?t.textContent="Game Over!":t.textContent="Keep Going!"}},t=document.querySelector("button");let s=!1;document.addEventListener("keydown",function(r){s||(s=!0,e.start(),t.textContent="Restart",t.classList.remove("start"),t.classList.add("restart")),"ArrowLeft"===r.key?e.moveLeft():"ArrowRight"===r.key?e.moveRight():"ArrowUp"===r.key?e.moveUp():"ArrowDown"===r.key&&e.moveDown(),e.updateScoreDisplay(),e.checkGameStatus()}),t.addEventListener("click",()=>{s?(e.restart(),t.textContent="Start",s=!1):(e.start(),t.textContent="Restart",s=!0),t.classList.toggle("start"),t.classList.toggle("restart"),e.updateScoreDisplay(),e.checkGameStatus()});
//# sourceMappingURL=index.7b23ebf9.js.map
